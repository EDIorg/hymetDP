<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Define a hymetDP variable"><title>Define a hymetDP variable — define_variable • hymetDP</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Define a hymetDP variable — define_variable"><meta property="og:description" content="Define a hymetDP variable"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">hymetDP</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/kzollove/hymetDP/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Define a hymetDP variable</h1>
      <small class="dont-index">Source: <a href="https://github.com/kzollove/hymetDP/blob/HEAD/R/define_variable.R" class="external-link"><code>R/define_variable.R</code></a></small>
      <div class="d-none name"><code>define_variable.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Define a hymetDP variable</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">define_variable</span><span class="op">(</span>
  L0_flat <span class="op">=</span> <span class="va">flat</span>,
  local_variable_column <span class="op">=</span> <span class="st">"variable_name"</span>,
  local_variable <span class="op">=</span> <span class="cn">NULL</span>,
  variable_name <span class="op">=</span> <span class="va">local_variable</span>,
  variable_units <span class="op">=</span> <span class="cn">NULL</span>,
  sample_medium <span class="op">=</span> <span class="st">"Unknown"</span>,
  value_type <span class="op">=</span> <span class="st">"Unknown"</span>,
  is_regular <span class="op">=</span> <span class="cn">FALSE</span>,
  time_support <span class="op">=</span> <span class="fl">0</span>,
  time_units <span class="op">=</span> <span class="st">"hour"</span>,
  data_type <span class="op">=</span> <span class="st">"Unknown"</span>,
  general_category <span class="op">=</span> <span class="st">"Unknown"</span>,
  no_data <span class="op">=</span> <span class="op">-</span><span class="fl">9999</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>L0_flat</dt>
<dd><p>(tbl_df, tbl, data.frame) The fully joined source L0 dataset, in "flat" format (see details).</p></dd>
<dt>local_variable_column</dt>
<dd><p>(character) Column in <code>L0_flat</code> table containing the L0 variable name.</p></dd>
<dt>local_variable</dt>
<dd><p>(character) Reference to a value in the <code>local_variable_column</code> from the <code>L0_flat</code> table to which the new hymetDP variable refers.</p></dd>
<dt>variable_name</dt>
<dd><p>(character) The CUAHSI ODM Controlled Vocabulary name for the variable that was measured, observed, modeled, etc. Defaults to the <code>local_variable</code> value.</p></dd>
<dt>variable_units</dt>
<dd><p>(character) The CUAHSI ODM Controlled Vocabulary name of units of the data values associated with a variable. Defaults to a column <code>unit</code> from the <code>L0_flat</code> table if left unspecified.</p></dd>
<dt>sample_medium</dt>
<dd><p>(character) The CUAHSI ODM Controlled Vocabulary name of the medium in which the sample or observation was taken or made.</p></dd>
<dt>value_type</dt>
<dd><p>(character) The CUAHSI ODM Controlled Vocabulary value that indicates how the data value was generated.</p></dd>
<dt>is_regular</dt>
<dd><p>(boolean) Value indicates whether the data values are from a regularly sampled time series. Choose <code>TRUE</code> or <code>FALSE</code>.</p></dd>
<dt>time_support</dt>
<dd><p>(numeric) Numerical value that indicates the time support (or temporal footprint) of the data values. 0 is used to indicate data values that are instantaneous. Other values indicate the time over which the data values are implicitly or explicitly averaged or aggregated. Goes along with <code>time_units</code> if <code>is_regular == TRUE</code>.</p></dd>
<dt>time_units</dt>
<dd><p>(character) The CUAHSI ODM Controlled Vocabulary name of units of the time support. If <code>time_support == 0</code>, indicating an instantaneous observation, a unit needs to still be given for completeness, although it is arbitrary.</p></dd>
<dt>data_type</dt>
<dd><p>(character) The CUAHSI ODM Controlled Vocabulary value that indicates how the value applies over a time interval.</p></dd>
<dt>general_category</dt>
<dd><p>(character) The CUAHSI ODM Controlled Vocabulary value for general category of the data  (i.e. Hydrology).</p></dd>
<dt>no_data</dt>
<dd><p>(numeric) Numeric value used to encode when a data value is not available for this variable. DataValues will be reformatted to match this value.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>(tbl_df, tbl, data.frame) An augmented version of the original flat table, with all of the original columns plus one for each of the specified variable values (i.e. variable_name, variable_units, etc.), plus the VariableCode column, with an auto-generated integer value that will become the primary key of the Variables table. Columns are only added the first time the function is run. Subsequent runs append values to the existing columns.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function appends columns to the <code>L0_flat</code> table and returns the augmented table.</p>
<p>"flat" format refers to the fully joined source L0 dataset in "wide" form with the exception of the core observation variables, which are in "long" form (i.e. using the variable_name, value, unit columns of the observation table). This "flat" format is the "widest" an L1 hymetDP dataset can be consistently spread due to the frequent occurrence of L0 source datasets with &gt; 1 core observation variable.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="va">flat</span> <span class="op">&lt;-</span> <span class="va">hymet_L0_flat</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">]</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">flat</span> <span class="op">&lt;-</span> <span class="fu">hymetDP</span><span class="fu">::</span><span class="fu">define_variable</span><span class="op">(</span></span>
<span class="r-in">  L0_flat <span class="op">=</span> <span class="va">flat</span>,</span>
<span class="r-in">  local_variable_column <span class="op">=</span> <span class="st">"variable_name"</span>,</span>
<span class="r-in">  local_variable <span class="op">=</span> <span class="st">"DSCHRGE_RATE"</span>,</span>
<span class="r-in">  variable_name <span class="op">=</span> <span class="st">"Discharge"</span>,</span>
<span class="r-in">  variable_units <span class="op">=</span> <span class="st">"liters per second"</span>,</span>
<span class="r-in">  sample_medium <span class="op">=</span> <span class="st">"Surface water"</span>,</span>
<span class="r-in">  value_type <span class="op">=</span> <span class="st">"Derived Value"</span>,</span>
<span class="r-in">  is_regular <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span class="r-in">  time_support <span class="op">=</span> <span class="fl">15</span>,</span>
<span class="r-in">  time_units <span class="op">=</span> <span class="st">"minute"</span>,</span>
<span class="r-in">  data_type <span class="op">=</span> <span class="st">"Continuous"</span>,</span>
<span class="r-in">  general_category <span class="op">=</span> <span class="st">"Hydrology"</span>,</span>
<span class="r-in">  no_data <span class="op">=</span> <span class="op">-</span><span class="fl">9999</span><span class="op">)</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in dplyr::mutate(., VariableCode = dplyr::coalesce(VariableCode.x,     VariableCode.y), VariableName = dplyr::coalesce(VariableName.x,     VariableName.y), VariableUnitsName = dplyr::coalesce(VariableUnitsName.x,     VariableUnitsName.y), SampleMedium = dplyr::coalesce(SampleMedium.x,     SampleMedium.y), ValueType = dplyr::coalesce(ValueType.x,     ValueType.y), IsRegular = dplyr::coalesce(IsRegular.x, IsRegular.y),     TimeSupport = dplyr::coalesce(TimeSupport.x, TimeSupport.y),     TimeUnitsName = dplyr::coalesce(TimeUnitsName.x, TimeUnitsName.y),     DataType = dplyr::coalesce(DataType.x, DataType.y), GeneralCategory = dplyr::coalesce(GeneralCategory.x,         GeneralCategory.y), NoDataValue = dplyr::coalesce(NoDataValue.x,         NoDataValue.y)):</span> Problem while computing `VariableName = dplyr::coalesce(VariableName.x,</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> VariableName.y)`.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `list2()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> object 'VariableName.x' not found</span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Kyle Zollo-Venecek.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

